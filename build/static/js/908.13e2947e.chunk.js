"use strict";(self.webpackChunkincrypto=self.webpackChunkincrypto||[]).push([[908],{43757:(e,s,r)=>{r.d(s,{A:()=>t});r(65043);var a=r(70579);const t=()=>(0,a.jsx)("div",{className:"access-denied-container",children:(0,a.jsxs)("div",{className:"access-denied-box",children:[(0,a.jsx)("h2",{children:"Acceso Denegado"}),(0,a.jsx)("p",{children:"No tienes permiso para acceder"})]})})},6908:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var a=r(65043),t=r(73216),c=r(86213),o=r(43757),n=r(70579);const i=()=>{const[e,s]=(0,a.useState)([]),[r,i]=(0,a.useState)(""),[l,d]=(0,a.useState)([]),[h,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!0),p=(0,t.Zp)();(0,a.useEffect)((()=>{const e=localStorage.getItem("userId");c.A.get("http://localhost:5000/api/userdata/UserRole/".concat(e,"/verify-role"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((e=>{u(e.data.role),x(!1)})).catch((e=>{console.error("Error fetching user role:",e),x(!1)}))}),[]),(0,a.useEffect)((()=>{"agent"!==h&&"admin"!==h||c.A.get("http://localhost:5000/api/crm/users").then((e=>s(e.data))).catch((e=>console.error("Error fetching users:",e)))}),[h]);const j=e.filter((e=>"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase())));return m?(0,n.jsx)("div",{children:"Cargando..."}):"agent"!==h&&"admin"!==h?(0,n.jsx)(o.A,{}):(0,n.jsxs)("div",{className:"crm-container",children:[(0,n.jsx)("h1",{children:"CRM - CryptoTest App"}),(0,n.jsx)("button",{className:"user-mode-button",onClick:()=>p("/dashboard"),children:"Modo Usuario"}),(0,n.jsxs)("div",{className:"search-delete-container",children:[(0,n.jsx)("input",{type:"text",placeholder:"B\xfascar usuarios...",value:r,onChange:e=>{i(e.target.value)},className:"search-bar"}),l.length>0&&(0,n.jsx)("button",{className:"delete-selected-button",onClick:async()=>{if(0===l.length)return;if(window.confirm("Estas seguro de eliminar los usuarios seleccionados?"))try{await Promise.all(l.map((e=>c.A.delete("http://localhost:5000/api/crm/user/".concat(e))))),s(e.filter((e=>!l.includes(e._id)))),d([]),alert("Usuarios seleccionados eliminados exitosamente")}catch(r){console.error("Error eliminando usuarios",r),alert("Error al eliminar los usuarios")}},children:"Borrar Selecci\xf3n"})]}),(0,n.jsxs)("table",{className:"user-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Selec."}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Email"})]})}),(0,n.jsx)("tbody",{children:j.map((e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"checkbox",checked:l.includes(e._id),onChange:()=>{return s=e._id,void d((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s}})}),(0,n.jsxs)("td",{onClick:()=>p("/crm/user/".concat(e._id)),children:[e.firstName," ",e.lastName]}),(0,n.jsx)("td",{onClick:()=>p("/crm/user/".concat(e._id)),children:e.email})]},e._id)))})]})]})}}}]);
//# sourceMappingURL=908.13e2947e.chunk.js.map