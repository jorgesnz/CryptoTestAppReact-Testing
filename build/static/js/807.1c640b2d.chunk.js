"use strict";(self.webpackChunkincrypto=self.webpackChunkincrypto||[]).push([[807],{37807:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(65043),r=t(86213),l=t(70579);const n=e=>{let{users:a,onSelectUser:t}=e;return(0,l.jsx)("div",{className:"user-list",children:a.map((e=>(0,l.jsx)("div",{className:"user-item",onClick:()=>t(e._id),children:(0,l.jsxs)("div",{className:"user-info",children:[(0,l.jsxs)("span",{className:"user-name",children:[e.firstName," ",e.lastName]}),(0,l.jsx)("span",{className:"user-email",children:e.email})]})},e._id)))})},o=e=>{let{userId:a}=e;const[t,n]=(0,s.useState)(null),[o,c]=(0,s.useState)([]),[i,d]=(0,s.useState)({amount:0,walletId:""}),[u,h]=(0,s.useState)({amount:0,walletId:""}),[m,p]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("adminToken"),t=await r.A.get("http://localhost:5000/api/admin/users/".concat(a),{headers:{Authorization:"Bearer ".concat(e)}});n(t.data),p(t.data.role);const s=await r.A.get("http://localhost:5000/api/admin/users/".concat(a,"/wallets"),{headers:{Authorization:"Bearer ".concat(e)}});c(s.data)}catch(e){console.error("Error fetching user or wallets:",e),alert("Error fetching user or wallets")}})()}),[a]);return t?(0,l.jsxs)("div",{className:"user-detail",children:[(0,l.jsxs)("h2",{children:[t.firstName," ",t.lastName]}),(0,l.jsxs)("p",{children:["Email: ",t.email]}),(0,l.jsxs)("p",{children:["Balance: ",o&&o.map((e=>(0,l.jsxs)("span",{children:[e.balance," ",e.cryptocurrency]},e._id)))]}),(0,l.jsxs)("p",{children:["Role: ",t.role]}),(0,l.jsxs)("select",{value:m,onChange:e=>p(e.target.value),children:[(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"agent",children:"Agent"}),(0,l.jsx)("option",{value:"admin",children:"Admin"})]}),(0,l.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("adminToken"),t=await r.A.put("http://localhost:5000/api/admin/users/".concat(a),{role:m},{headers:{Authorization:"Bearer ".concat(e)}});n(t.data),alert("Role updated")}catch(e){console.error("Error updating role:",e)}},children:"Update Role"}),(0,l.jsx)("h3",{children:"Make a Deposit"}),(0,l.jsxs)("select",{value:i.walletId,onChange:e=>d({...i,walletId:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Select Wallet"}),o&&o.map((e=>(0,l.jsxs)("option",{value:e._id,children:[e.cryptocurrency," - ",e.address]},e._id)))]}),(0,l.jsx)("input",{type:"number",placeholder:"Amount",value:i.amount,onChange:e=>d({...i,amount:e.target.value})}),(0,l.jsx)("button",{onClick:async()=>{if(i.walletId)try{const e=localStorage.getItem("adminToken");await r.A.post("http://localhost:5000/api/admin/users/".concat(a,"/deposit"),i,{headers:{Authorization:"Bearer ".concat(e)}}),alert("Deposit successful")}catch(e){console.error("Error making deposit:",e)}else alert("Please select a wallet for the deposit.")},children:"Add Deposit"}),(0,l.jsx)("h3",{children:"Make a Withdrawal"}),(0,l.jsxs)("select",{value:u.walletId,onChange:e=>h({...u,walletId:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Select Wallet"}),o&&o.map((e=>(0,l.jsxs)("option",{value:e._id,children:[e.cryptocurrency," - ",e.address]},e._id)))]}),(0,l.jsx)("input",{type:"number",placeholder:"Amount",value:u.amount,onChange:e=>h({...u,amount:e.target.value})}),(0,l.jsx)("button",{onClick:async()=>{if(u.walletId)try{const e=localStorage.getItem("adminToken");await r.A.post("http://localhost:5000/api/admin/users/".concat(a,"/withdrawal"),u,{headers:{Authorization:"Bearer ".concat(e)}}),alert("Withdrawal successful")}catch(e){console.error("Error making withdrawal:",e)}else alert("Please select a wallet for the withdrawal.")},children:"Add Withdrawal"})]}):(0,l.jsx)("div",{className:"loading",children:"Loading user data..."})},c=()=>{const[e,a]=(0,s.useState)([]),[t,c]=(0,s.useState)(null),[i,d]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("adminToken");if(!e)throw new Error("No token found");const t=await r.A.get("http://localhost:5000/api/admin/users",{headers:{Authorization:"Bearer ".concat(e)}});a(t.data)}catch(e){console.error("Error fetching users:",e)}})()}),[]);const u=e.filter((e=>e.firstName.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())));return(0,l.jsxs)("div",{className:"admin-page",children:[(0,l.jsxs)("div",{className:"header",children:[(0,l.jsx)("h1",{children:"Admin Dashboard"}),(0,l.jsx)("input",{type:"text",placeholder:"Search users...",value:i,onChange:e=>d(e.target.value)})]}),(0,l.jsxs)("div",{className:"content",children:[(0,l.jsx)("div",{className:"user-list",children:(0,l.jsx)(n,{users:u,onSelectUser:c})}),(0,l.jsx)("div",{className:"user-detail",children:t?(0,l.jsx)(o,{userId:t}):(0,l.jsx)("div",{className:"no-user-selected",children:"Select a user to view details"})})]})]})}}}]);
//# sourceMappingURL=807.1c640b2d.chunk.js.map